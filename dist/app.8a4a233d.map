{"version":3,"sources":["src\\js\\app.js"],"names":["document","addEventListener","inputScreen","getElementById","display","input","output","current","reg","regOp","doingCalc","buttons","querySelectorAll","map","button","handleClick","event","updateScreen","innerText","onlyOneOperator","op","length","console","log","match","n","slice","add","substract","alert","multiply","divide","equal","verif","eval","Math","floor","clear","inputKey","target","value","testDeReg"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAW;AACvD;AACA,MAAMC,cAAcF,SAASG,cAAT,CAAwB,OAAxB,CAApB;AACA,MAAMC,UAAUJ,SAASG,cAAT,CAAwB,SAAxB,CAAhB;;AAEA;AACA,MAAIE,QAAQ,GAAZ;AACA,MAAIC,SAAS,EAAb;AACA,MAAIC,UAAU,EAAd;;AAEA;AACA,MAAMC,MAAM,MAAZ;AACA,MAAMC,QAAQ,YAAd;;AAEA;AACA,MAAIC,YAAY,IAAhB;;AAEA;AACA,MAAMC,UAAU,6BAAIX,SAASY,gBAAT,CAA0B,MAA1B,CAAJ,GAAuCC,GAAvC,CAA2C;AAAA,WACzDC,OAAOb,gBAAP,CAAwB,OAAxB,EAAiC,iBAAS;AACxCc,kBAAYC,KAAZ;AACD,KAFD,CADyD;AAAA,GAA3C,CAAhB;;AAMA;AACA,WAASC,YAAT,CAAsBZ,KAAtB,EAA6B;AAC3BE,eAAWF,KAAX;AACAH,gBAAYgB,SAAZ,GAAwBX,OAAxB;AACD;;AAED;AACA,WAASY,eAAT,CAAyBC,EAAzB,EAA6B;AAC3B,QAAId,OAAOe,MAAP,KAAkB,CAAtB,EAAyB;AACvB;AACD;AACDC,YAAQC,GAAR,CAAY,IAAIC,KAAJ,CAAUf,KAAV,CAAZ;AACA,QAAMgB,IAAInB,OAAOe,MAAP,GAAgB,CAA1B;AACA,QACEf,OAAOmB,CAAP,MAAc,GAAd,IACAnB,OAAOmB,CAAP,MAAc,GADd,IAEAnB,OAAOmB,CAAP,MAAc,GAFd,IAGAnB,OAAOmB,CAAP,MAAc,GAJhB,EAKE;AACAnB,eAASA,OAAOoB,KAAP,CAAa,CAAb,EAAgBD,CAAhB,CAAT;AACAH,cAAQC,GAAR,CAAY,wBAAZ,EAAsCjB,MAAtC;AACD;AACDgB,YAAQC,GAAR,CAAY,YAAZ;AACA;AACD;;AAED;AACA,MAAMI,MAAM3B,SACTG,cADS,CACM,KADN,EAETF,gBAFS,CAEQ,OAFR,EAEiB,iBAAS;AAClCqB,YAAQC,GAAR,CAAY,cAAZ;AACA,QAAIhB,QAAQA,QAAQc,MAAR,GAAiB,CAAzB,MAAgC,GAApC,EAAyC;AACvC;AACD;AACDf,cAAUD,KAAV;AACAc,oBAAgB,GAAhB;AACAb,cAAU,GAAV;AACAD,YAAQ,EAAR;AACAD,YAAQc,SAAR,GAAoB,GAApB;AACAD,iBAAa,KAAb;AACA;AACAK,YAAQC,GAAR,CAAY,YAAZ,EAA0BjB,MAA1B;AACD,GAfS,CAAZ;;AAiBA;AACA,MAAMsB,YAAY5B,SACfG,cADe,CACA,UADA,EAEfF,gBAFe,CAEE,OAFF,EAEW,YAAM;AAC/B,QAAIM,QAAQA,QAAQc,MAAR,GAAiB,CAAzB,MAAgC,GAApC,EAAyC;AACvCQ,YAAM,YAAN;AACA;AACD;AACDvB,cAAUD,KAAV;AACAc,oBAAgB,GAAhB;AACAb,cAAU,GAAV;AACAD,YAAQ,EAAR;AACAD,YAAQc,SAAR,GAAoB,GAApB;AACAD,iBAAa,KAAb;AACAP,gBAAY,IAAZ;AACAY,YAAQC,GAAR,CAAY,YAAZ,EAA0BjB,MAA1B;AACD,GAfe,CAAlB;;AAiBA;AACA,MAAMwB,WAAW9B,SACdG,cADc,CACC,UADD,EAEdF,gBAFc,CAEG,OAFH,EAEY,YAAM;AAC/B,QAAIM,QAAQA,QAAQc,MAAR,GAAiB,CAAzB,MAAgC,GAApC,EAAyC;AACvCQ,YAAM,YAAN;AACA;AACD;AACDvB,cAAUD,KAAV;AACAc,oBAAgB,GAAhB;AACAb,cAAU,GAAV;AACAD,YAAQ,EAAR;AACAD,YAAQc,SAAR,GAAoB,GAApB;AACAD,iBAAa,KAAb;AACAP,gBAAY,IAAZ;AACAY,YAAQC,GAAR,CAAY,YAAZ,EAA0BjB,MAA1B;AACD,GAfc,CAAjB;;AAiBA;AACA,MAAMyB,SAAS/B,SACZG,cADY,CACG,QADH,EAEZF,gBAFY,CAEK,OAFL,EAEc,YAAM;AAC/B,QAAIM,QAAQA,QAAQc,MAAR,GAAiB,CAAzB,MAAgC,GAApC,EAAyC;AACvCQ,YAAM,YAAN;AACA;AACD;AACDvB,cAAUD,KAAV;AACAc,oBAAgB,GAAhB;AACAb,cAAU,GAAV;AACAD,YAAQ,EAAR;AACAD,YAAQc,SAAR,GAAoB,GAApB;AACAD,iBAAa,KAAb;AACAP,gBAAY,IAAZ;AACAY,YAAQC,GAAR,CAAY,YAAZ,EAA0BjB,MAA1B;AACD,GAfY,CAAf;;AAiBA;AACA,MAAM0B,QAAQhC,SACXG,cADW,CACI,QADJ,EAEXF,gBAFW,CAEM,OAFN,EAEe,iBAAS;AAClC,QACEM,QAAQA,QAAQc,MAAR,GAAiB,CAAzB,MAAgC,GAAhC,IACAd,QAAQA,QAAQc,MAAR,GAAiB,CAAzB,MAAgC,GADhC,IAEAd,QAAQA,QAAQc,MAAR,GAAiB,CAAzB,MAAgC,GAFhC,IAGAd,QAAQA,QAAQc,MAAR,GAAiB,CAAzB,MAAgC,GAJlC,EAKE;AACAQ,YAAM,YAAN;AACA;AACD;;AAEDvB,cAAUD,KAAV;AACAiB,YAAQC,GAAR,CAAYjB,MAAZ;AACA,QAAME,MAAM,cAAZ;AACA,QAAMyB,QAAQ3B,OAAOkB,KAAP,CAAahB,GAAb,CAAd;AACA,QAAIF,OAAOe,MAAP,GAAgB,CAAhB,IAAqBY,KAAzB,EAAgC;AAC9BX,cAAQC,GAAR,CAAYW,KAAK5B,MAAL,CAAZ;AACAD,cAAQ8B,KAAKC,KAAL,CAAWF,KAAK5B,MAAL,IAAe,KAA1B,IAAmC,KAA3C;AACAF,cAAQc,SAAR,GAAoBb,KAApB;AACAY,mBAAa,QAAQZ,KAArB;AACAC,eAASD,KAAT;AACAA,cAAQ,EAAR;AACAK,kBAAY,KAAZ;AACD;AACD;AACD,GA3BW,CAAd;;AA6BA;AACA,MAAM2B,QAAQrC,SACXG,cADW,CACI,OADJ,EAEXF,gBAFW,CAEM,OAFN,EAEe,YAAM;AAC/BqB,YAAQC,GAAR,CAAY,UAAZ;AACAlB,YAAQ,GAAR;AACAC,aAAS,EAAT;AACAC,cAAU,EAAV;AACAH,YAAQc,SAAR,GAAoBb,KAApB;AACAH,gBAAYgB,SAAZ,GAAwBX,OAAxB;AACAG,gBAAY,IAAZ;AACD,GAVW,CAAd;;AAYA;AACA,WAASK,WAAT,CAAqBC,KAArB,EAA4B;AAC1B,QAAIN,SAAJ,EAAe;AACb,UAAM4B,WAAWtB,MAAMuB,MAAN,CAAaC,KAA9B;AACA,UAAMC,YAAYpC,MAAMmB,KAAN,CAAYhB,GAAZ,CAAlB;AACA,UAAI8B,aAAa,GAAb,IAAoBG,SAAxB,EAAmC;AACjC;AACD,OAFD,MAEO,IAAIpC,UAAU,GAAV,IAAiBiC,aAAa,GAAlC,EAAuC;AAC5CjC,gBAAQiC,QAAR;AACAlC,gBAAQc,SAAR,GAAoBb,KAApB;AACAY,qBAAaqB,QAAb;AACA;AACD;AACDjC,eAASiC,QAAT;AACAlC,cAAQc,SAAR,GAAoBb,KAApB;AACAY,mBAAaqB,QAAb;AACA5B,kBAAY,IAAZ;AACAY,cAAQC,GAAR,CAAY,WAAZ,EAAyBlB,KAAzB;AACD;AACD;AACD;AACF,CA1LD","file":"app.8a4a233d.map","sourceRoot":"..","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n  //gere les zone d'affichage\r\n  const inputScreen = document.getElementById('input')\r\n  const display = document.getElementById('display')\r\n\r\n  //init les valeurs des variables utiles\r\n  let input = '0'\r\n  let output = ''\r\n  let current = ''\r\n\r\n  //quellques regEx necessaires\r\n  const reg = /\\./gm\r\n  const regOp = /[*\\-+\\/]/gi\r\n\r\n  //valide la possibilitÃ©e de calculer\r\n  let doingCalc = true\r\n\r\n  //rend les chiffres clickable\r\n  const buttons = [...document.querySelectorAll('.num')].map(button =>\r\n    button.addEventListener('click', event => {\r\n      handleClick(event)\r\n    })\r\n  )\r\n\r\n  //update inputScreen\r\n  function updateScreen(input) {\r\n    current += input\r\n    inputScreen.innerText = current\r\n  }\r\n\r\n  //handle repeat operator\r\n  function onlyOneOperator(op) {\r\n    if (output.length === 0) {\r\n      return\r\n    }\r\n    console.log('+'.match(regOp))\r\n    const n = output.length - 1\r\n    if (\r\n      output[n] === '/' ||\r\n      output[n] === '*' ||\r\n      output[n] === '-' ||\r\n      output[n] === '+'\r\n    ) {\r\n      output = output.slice(0, n)\r\n      console.log('output apres modif => ', output)\r\n    }\r\n    console.log('IMPOSSIBLE')\r\n    return\r\n  }\r\n\r\n  //handle add\r\n  const add = document\r\n    .getElementById('add')\r\n    .addEventListener('click', event => {\r\n      console.log('you want add')\r\n      if (current[current.length - 2] === '+') {\r\n        return\r\n      }\r\n      output += input\r\n      onlyOneOperator('+')\r\n      output += '+'\r\n      input = ''\r\n      display.innerText = '+'\r\n      updateScreen(' + ')\r\n      //doingCalc = true\r\n      console.log('output => ', output)\r\n    })\r\n\r\n  //handle substract\r\n  const substract = document\r\n    .getElementById('subtract')\r\n    .addEventListener('click', () => {\r\n      if (current[current.length - 2] === '-') {\r\n        alert('Impossible')\r\n        return\r\n      }\r\n      output += input\r\n      onlyOneOperator('-')\r\n      output += '-'\r\n      input = ''\r\n      display.innerText = '-'\r\n      updateScreen(' - ')\r\n      doingCalc = true\r\n      console.log('output => ', output)\r\n    })\r\n\r\n  //handle multiply\r\n  const multiply = document\r\n    .getElementById('multiply')\r\n    .addEventListener('click', () => {\r\n      if (current[current.length - 2] === '*') {\r\n        alert('Impossible')\r\n        return\r\n      }\r\n      output += input\r\n      onlyOneOperator('*')\r\n      output += '*'\r\n      input = ''\r\n      display.innerText = 'x'\r\n      updateScreen(' x ')\r\n      doingCalc = true\r\n      console.log('output => ', output)\r\n    })\r\n\r\n  //handle divide\r\n  const divide = document\r\n    .getElementById('divide')\r\n    .addEventListener('click', () => {\r\n      if (current[current.length - 2] === '/') {\r\n        alert('Impossible')\r\n        return\r\n      }\r\n      output += input\r\n      onlyOneOperator('/')\r\n      output += '/'\r\n      input = ''\r\n      display.innerText = '/'\r\n      updateScreen(' / ')\r\n      doingCalc = true\r\n      console.log('output => ', output)\r\n    })\r\n\r\n  // handle equal\r\n  const equal = document\r\n    .getElementById('equals')\r\n    .addEventListener('click', event => {\r\n      if (\r\n        current[current.length - 2] === '+' ||\r\n        current[current.length - 2] === '-' ||\r\n        current[current.length - 2] === '/' ||\r\n        current[current.length - 2] === '*'\r\n      ) {\r\n        alert('Impossible')\r\n        return\r\n      }\r\n\r\n      output += input\r\n      console.log(output)\r\n      const reg = /\\+|-|\\*|\\//gm\r\n      const verif = output.match(reg)\r\n      if (output.length > 1 && verif) {\r\n        console.log(eval(output))\r\n        input = Math.floor(eval(output) * 10000) / 10000\r\n        display.innerText = input\r\n        updateScreen(' = ' + input)\r\n        output = input\r\n        input = ''\r\n        doingCalc = false\r\n      }\r\n      return\r\n    })\r\n\r\n  // handle clear button\r\n  const clear = document\r\n    .getElementById('clear')\r\n    .addEventListener('click', () => {\r\n      console.log('on reset')\r\n      input = '0'\r\n      output = ''\r\n      current = ''\r\n      display.innerText = input\r\n      inputScreen.innerText = current\r\n      doingCalc = true\r\n    })\r\n\r\n  //handle click number\r\n  function handleClick(event) {\r\n    if (doingCalc) {\r\n      const inputKey = event.target.value\r\n      const testDeReg = input.match(reg)\r\n      if (inputKey === '.' && testDeReg) {\r\n        return\r\n      } else if (input === '0' && inputKey !== '.') {\r\n        input = inputKey\r\n        display.innerText = input\r\n        updateScreen(inputKey)\r\n        return\r\n      }\r\n      input += inputKey\r\n      display.innerText = input\r\n      updateScreen(inputKey)\r\n      doingCalc = true\r\n      console.log('input => ', input)\r\n    }\r\n    return\r\n  }\r\n})\r\n"]}